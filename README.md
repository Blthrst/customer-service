## Сервис-заказчик отчета

#### Установка

Сперва необходимо склонировать репозиторий и установить все необходимые зависимости

    git clone https://github.com/Blthrst/customer-service
    npm i yarn 
    yarn install

#### Подготовка к запуску

Далее нужно настроить переменные окружения. Для этого переименуйте файл `.env.example` в `.env` и подставьте свои значения переменных окружения. 

После этого нужно подготовить БД. Для этого создайте БД `customer` (или ту, имя которой соответствует Вашему значению `MIKRO_ORM_CSTMR_DB`) и запустите миграции:
    
    yarn run m:up

#### Запуск

После совершения всех действий можно запустить сервис-заказчик. Для заполнения таблицы данными, раскомментируйте цикл в файле `database/database.ts` и импорт `User` при первом запуске. При последующих запусках цикл должен быть закомментирован во избежание ошибки. 

Запустите сервис-заказчик, введя в терминал `yarn run start`

#### API

Для получения необработанных данных предусмотрен эндпоинт `/raw`.

По умолчанию URL будет выглядеть так: `http://localhost:3001/raw`

Для постраничной навигации используется параметр запроса `page`, например, ответ на запрос к `http://localhost:3001/raw?page=1` будет представлять собой вторую страницу (т.к. нумерация страниц начинается с 0).